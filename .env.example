# ══════════════════════════════════════════════════════════════════════════════
# Project Apex - Environment Configuration
# ══════════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in the values
# NEVER commit .env files with real secrets to version control
#
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults in config/*.toml files
# ══════════════════════════════════════════════════════════════════════════════

# ==============================================================================
# ENVIRONMENT
# ==============================================================================

# Environment name: development, staging, production
APEX_ENV=development

# Configuration file path
APEX_CONFIG=config/development.toml

# ==============================================================================
# DATABASE (PostgreSQL)
# ==============================================================================

# [REQUIRED] Primary database connection URL
# Format: postgres://user:password@host:port/database
DATABASE_URL=postgres://apex:apex_secret@localhost:5432/apex

# Connection pool settings (override config file)
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5

# Read replica URLs (comma-separated, for staging/production)
# DATABASE_REPLICA_URLS=postgres://apex:password@replica1:5432/apex,postgres://apex:password@replica2:5432/apex

# Database password (alternative to embedding in URL)
# DB_PASSWORD=your_secure_password

# ==============================================================================
# REDIS / CACHE
# ==============================================================================

# [REQUIRED] Redis connection URL
# Format: redis://[:password@]host:port[/database]
REDIS_URL=redis://localhost:6379

# Redis password (if not embedded in URL)
# REDIS_PASSWORD=your_redis_password

# Redis cluster nodes (comma-separated, for production)
# REDIS_CLUSTER_NODES=redis://node1:6379,redis://node2:6379,redis://node3:6379

# ==============================================================================
# SERVER
# ==============================================================================

# Server binding
APEX_SERVER_HOST=0.0.0.0
APEX_SERVER_PORT=8080
APEX_GRPC_PORT=50051

# Metrics port (Prometheus)
PROMETHEUS_PORT=9090

# ==============================================================================
# OBSERVABILITY
# ==============================================================================

# Logging
# Levels: trace, debug, info, warn, error
RUST_LOG=info,apex_core=debug

# OpenTelemetry / Jaeger
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=apex-server

# Service version (for tracing)
APEX_VERSION=0.1.0

# ==============================================================================
# LLM PROVIDERS
# ==============================================================================

# [REQUIRED] OpenAI API Key
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-key-here

# [REQUIRED] Anthropic API Key
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Azure OpenAI (optional, for production failover)
# AZURE_OPENAI_API_KEY=your-azure-openai-key
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/

# Google AI (optional)
# GOOGLE_AI_API_KEY=your-google-ai-key

# Cohere (optional)
# COHERE_API_KEY=your-cohere-key

# ==============================================================================
# ORCHESTRATOR SETTINGS
# ==============================================================================

# Maximum concurrent agents
APEX_ORCHESTRATOR_MAX_CONCURRENT_AGENTS=100

# Enable FrugalGPT model routing
APEX_ORCHESTRATOR_ENABLE_MODEL_ROUTING=true

# Circuit breaker settings
APEX_ORCHESTRATOR_CIRCUIT_BREAKER_THRESHOLD=5

# Default resource limits per request
APEX_ORCHESTRATOR_DEFAULT_TOKEN_LIMIT=20000
APEX_ORCHESTRATOR_DEFAULT_COST_LIMIT=0.25
APEX_ORCHESTRATOR_DEFAULT_TIME_LIMIT=300

# ==============================================================================
# SECURITY
# ==============================================================================

# [REQUIRED] JWT Secret (minimum 256 bits / 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-256-bit-secret-key-here-minimum-32-chars

# JWT expiry (hours)
JWT_EXPIRY_HOURS=24

# JWT refresh token expiry (days)
JWT_REFRESH_EXPIRY_DAYS=7

# [REQUIRED] Encryption key for sensitive data (256 bits / 32 characters)
# Generate with: openssl rand -base64 32
APEX_ENCRYPTION_KEY=your-256-bit-encryption-key-here

# API key for testing (staging only)
# STAGING_TEST_API_KEY=test-api-key-for-staging

# ==============================================================================
# FEATURE FLAGS (Optional)
# ==============================================================================

# LaunchDarkly SDK key (for production feature flags)
# LAUNCHDARKLY_SDK_KEY=sdk-your-key

# ==============================================================================
# ALERTING (Production)
# ==============================================================================

# PagerDuty integration key
# PAGERDUTY_KEY=your-pagerduty-key

# Slack webhook for alerts
# SLACK_ALERT_WEBHOOK=https://hooks.slack.com/services/xxx/yyy/zzz

# ==============================================================================
# BACKUP & STORAGE (Production)
# ==============================================================================

# S3 bucket for backups
# BACKUP_S3_BUCKET=apex-backups-production

# AWS credentials (or use IAM roles)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_REGION=us-east-1

# ==============================================================================
# EXTERNAL SERVICES
# ==============================================================================

# GitHub API (for GitHub integration)
# GITHUB_TOKEN=ghp_your_github_token

# Sentry for error tracking (optional)
# SENTRY_DSN=https://key@sentry.io/project

# ==============================================================================
# FRONTEND (Development)
# ==============================================================================

VITE_API_URL=http://localhost:8080
VITE_WS_URL=ws://localhost:8080/ws
VITE_GRPC_URL=http://localhost:50051

# ==============================================================================
# DOCKER / CONTAINER SETTINGS
# ==============================================================================

# Docker Compose project name
COMPOSE_PROJECT_NAME=apex

# Docker registry for image tagging/pushing
DOCKER_REGISTRY=apex

# Container resource limits
APEX_API_CPU_LIMIT=2
APEX_API_MEMORY_LIMIT=2G
APEX_WORKER_CPU_LIMIT=1
APEX_WORKER_MEMORY_LIMIT=1G

# ==============================================================================
# PRODUCTION DOCKER SETTINGS
# ==============================================================================

# Production database password (override default)
# POSTGRES_PASSWORD=your_secure_production_password

# Production Redis password
# REDIS_PASSWORD=your_secure_redis_password

# Traefik basic auth (for monitoring endpoints)
# TRAEFIK_BASIC_AUTH=user:$$apr1$$...

# ACME email for Let's Encrypt
# ACME_EMAIL=ops@example.com

# Elasticsearch URL (for centralized logging)
# ELASTICSEARCH_URL=http://elasticsearch:9200

# Grafana admin credentials (production - change these!)
# GF_SECURITY_ADMIN_USER=admin
# GF_SECURITY_ADMIN_PASSWORD=change_me_in_production

# ==============================================================================
# DEVELOPMENT-ONLY SETTINGS
# ==============================================================================

# Enable debug endpoints (NEVER in production)
# APEX_DEBUG_ENABLED=true

# Mock LLM responses for testing
# APEX_MOCK_LLM=false

# ==============================================================================
# GRAFANA / MONITORING
# ==============================================================================

# Grafana admin credentials (development only)
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=apex_admin

# ==============================================================================
# NOTES
# ==============================================================================
#
# Security Best Practices:
# 1. Use different secrets for each environment
# 2. Rotate secrets regularly (especially API keys)
# 3. Use a secrets manager in production (AWS Secrets Manager, HashiCorp Vault)
# 4. Never log or expose secrets
# 5. Use IAM roles instead of access keys where possible
#
# Environment-Specific Files:
# - .env.local - Local overrides (git-ignored)
# - .env.development - Development defaults
# - .env.staging - Staging values (use secrets manager)
# - .env.production - Production values (use secrets manager)
#
